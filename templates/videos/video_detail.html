{% extends 'base.html' %}

{% block title %}{{ object.title }}{% endblock %}

{% block content %}
    <div class="video-player-container">
        <video controls>
            <source src="{{ object.video_file.url }}" type="video/mp4">
            Tarayıcınız video etiketini desteklemiyor.
        </video>

        <h1>{{ object.title }}</h1>
        <p>Yükleyen: {{ object.uploader.name }} | Yüklenme Tarihi: {{ object.created_at|date:"d F Y" }}</p>

        <hr>
        <h3>Açıklama</h3>
        <p style="color: white;">{{ object.description }}</p>

        <hr>
        <h3>Yorumlar ({{ comments.count }})</h3>

        {% if user.is_authenticated %}
            <form method="post" class="comment-form">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="button-primary">Yorum Yap</button>
            </form>
        {% else %}
            <p><a href="{% url 'login' %}?next={{ request.path }}">Yorum yapmak için giriş yapın.</a></p>
        {% endif %}

        <div class="comment-list">
            {% for comment in comments %}
                <div class="comment-item">
                    <div class="channel-avatar">
                        <span>{{ comment.user.name|first|upper }}</span>
                    </div>
                    <div class="comment-content">
                        <p><b>{{ comment.user.name }}</b> <span class="comment-date">{{ comment.created_at|timesince }} önce</span></p>
                        <p>{{ comment.text }}</p>
                    </div>
                </div>
            {% empty %}
                <p>Henüz hiç yorum yapılmamış.</p>
            {% endfor %}
        </div>
        </div>
{% endblock %}
